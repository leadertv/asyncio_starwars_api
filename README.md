
# ASYNCIO - SWAPI Characters Loader - The Star Wars API

Этот проект загружает информацию о персонажах из Star Wars API (SWAPI) и сохраняет её в базу данных PostgreSQL. Проект выполнен асинхронно, чтобы обеспечить более эффективную работу с API и базой данных.

## Содержание

- [Установка](#Установка)
- [Подготовка базы данных](#Подготовка-базы-данных)
- [Использование](#Использование)
- [Структура проекта](#Структура-проекта)
- [Тестирование](#Тестирование)

## Установка

1. Клонируйте репозиторий или скачайте файлы проекта.
2. Убедитесь, что у вас установлен Python версии 3.7 или выше.
3. Установите зависимости:

    ```bash
    pip3 install -r requirements.txt
    ```

   Содержимое `requirements.txt`:
   ```
   aiohttp
   asyncpg
   sqlalchemy
   python-dotenv
   ```

4. Создайте файл `.env` (он уже есть в репозитории) в корне проекта и добавьте следующую строку, заменив `<username>`, `<password>` и `<database>` на ваши данные для подключения к PostgreSQL:

    ```
    DATABASE_URL=postgresql://<username>:<password>@localhost/<database>
    ```

## Подготовка базы данных

1. Запустите PostgreSQL сервер.
2. Создайте базу данных, которую вы хотите использовать для хранения данных (если ещё не создана).
3. Выполните скрипт миграции для создания таблицы:
   
    ```bash
    python3 migrate.py
    ```

## Использование

1. Запустите скрипт загрузки данных из API в базу данных:

    ```bash
    python3 load_data.py
    ```

    Скрипт загрузит информацию о персонажах и сохранит её в базу данных асинхронно.

## Структура проекта

- `migrate.py` — скрипт для создания таблицы в базе данных.
- `load_data.py` — скрипт для загрузки данных с API и их сохранения в базу данных.
- `.env` — файл, содержащий конфигурационные данные (не включён в репозиторий, создается пользователем).
- `requirements.txt` — список зависимостей проекта.

## Тестирование

После выполнения всех шагов вы можете убедиться, что данные загружены корректно, подключившись к вашей базе данных PostgreSQL и выполнив запрос:

```sql
SELECT * FROM characters;
```

Вы должны увидеть информацию о персонажах Star Wars, загруженную из SWAPI.

### Примечания

- В данном проекте используется семафор для ограничения до 10 параллельных соединений.
- Если у вас возникнут какие-либо ошибки при работе с бд, убедитесь, что подключение настроено правильно, и все зависимости установлены.
